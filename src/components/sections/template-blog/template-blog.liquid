{%- style -%}
  [data-section-id="{{ section.id }}"] {
    background: {{ section.settings.background_color }};
    padding-top: {{ section.settings.padding_top_mb }}px;
    padding-bottom: {{ section.settings.padding_bottom_mb }}px;
  }
  @media screen and (min-width: 768px) {
    [data-section-id="{{ section.id }}"] {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

{% paginate blog.articles by section.settings.number_of_blog_posts %}
  <div class="page-width" data-section-id="{{ section.id }}">
    <div class='blog-wrapper grid grid-cols-2 gap-x-4 gap-y-5 md:grid-cols-3 md:gap-x-7.5 md:gap-y-12.5'>
      {% for article in blog.articles %}
        {% render 'article-card', article: article, blog: blog, card_tag: section.settings.card_tag, ratio: section.settings.ratio -%}
      {% endfor %}
    </div>
    <blog-loadmore data-click-loadmore="false" class="block mt-4 lg:mt-16 text-center w-fit mx-auto{% if paginate.pages <= 1 or paginate.current_page == paginate.pages %} hidden{% endif %}">
      <span data-href="{{ paginate.next.url }}" data-page="{{ paginate.pages }}" class="load-more_btn cursor-pointer block w-fit mx-auto bg-[#eee] rounded-[10px] text-secondary hover:text-background hover:bg-primary transition-all text-base leading-6 py-3 px-10">{{ section.settings.blog_read_more }}</span>
    </blog-loadmore>
  </div>
{% endpaginate %}
{% capture src_url %}{{ 'template-blog.js' | asset_url }}{% endcapture %}
{% render 'atom_script', src: src_url, priority: 'normal', type: "defer" %}
    
{% schema %}
{
  "name": "Blog",
  "settings": [
    {
      "type": "header",
      "content": "Common settings"
    },
    {
      "type": "number",
      "id": "number_of_blog_posts",
      "label": "Posts per page",
      "default": 12
    },
    {
      "type": "text",
      "id": "blog_read_more",
      "label": "Button text loadmore",
      "default": "Load more"
    },
    {
      "type": "select",
      "id": "card_tag",
      "label": "Card tag",
      "default": "h2",
      "options": [
        {
          "value": "h1",
          "label": "Heading 1"
        },
        {
          "value": "h2",
          "label": "Heading 2"
        },
        {
          "value": "h3",
          "label": "Heading 3"
        },
        {
          "value": "h4",
          "label": "Heading 4"
        },
        {
          "value": "h5",
          "label": "Heading 5"
        }
      ]
    },
    {
      "type": "select",
      "id": "ratio",
      "label": "Ratio",
      "default": "square",
      "options": [
        {
          "value": "square",
          "label": "Square"
        },
        {
          "value": "landscape",
          "label": "Landscape"
        }
      ]
    },
    {
      "type": "range",
      "id": "post_per_row",
      "label": "Posts per row",
      "min": 1,
      "max": 6,
      "step": 1,
      "default": 4
    },
    {
      "type": "range",
      "id": "post_per_row_tablet",
      "label": "Posts per row tablet",
      "min": 1,
      "max": 5,
      "step": 1,
      "default": 3
    },
    {
      "type": "range",
      "id": "post_per_row_mobile",
      "label": "Posts per row mobile",
      "min": 1,
      "max": 3,
      "step": 1,
      "default": 2
    },
    {
      "type": "header",
      "content": "Desktop settings"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 50,
      "max": 150,
      "step": 1,
      "unit": "px",
      "label": "Padding Top DeskTop",
      "default": 64
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 50,
      "max": 150,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom Desktop",
      "default": 92
    },
    {
      "type": "header",
      "content": "Mobile settings"
    },
    {
      "type": "range",
      "id": "padding_top_mb",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top Mobile",
      "default": 32
    },
    {
      "type": "range",
      "id": "padding_bottom_mb",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom Mobile",
      "default": 32
    }
  ]
}
{% endschema %}
