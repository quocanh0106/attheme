{% assign linklist = linklists[section.settings.menu] %}
{% for grandParentLink in linklist.links %}
  {% if grandParentLink.links.size == 0 and grandParentLink.url == collection.url%}
    {% assign mainList = linklist.links %}
    {% break %}
  {% endif %}
  {% if grandParentLink.links.size > 0 %}
    {% if grandParentLink.url == collection.url %}
      {% assign mainList = grandParentLink.links %}
      {% break %}
    {% else %}
      {% for parentLink in grandParentLink.links %}
        {% if parentLink.links.size == 0 and parentLink.url == collection.url%}
          {% assign mainList = grandParentLink.links %}
          {% break %}
        {% endif %}
        {% if parentLink.links.size > 0 %}
          {% if parentLink.url == collection.url %}
            {% assign mainList = parentLink.links %}
            {% break %}
          {% else %}
            {% for childLink in parentLink.links %}
              {% if childLink.url == collection.url %}
                {% assign mainList = parentLink.links %}
                {% break %}
              {% endif %}
            {% endfor %}
          {% endif %}
        {% endif %}
      {% endfor %}
    {% endif %}
  {% endif %}
{% endfor %}
{%- paginate collection.products by 20 -%}
  {% assign current = paginate.current_page %}
{%- endpaginate -%}
{% if mainList and current <= 1 %}
  <div class="pl-4 lg:pr-4 max-w-[832px] mx-auto flex tems-center gap-5">
    <swiper-component class="block overflow-hidden relative" data-infor-swiper='{
        "modules": ["Navigation"],
        "slidesPerView": "auto",
        "spaceBetween": 10,
        "grabCursor": true,
        "navigation": {
          "nextEl": ".next-{{ section.id }}",
          "prevEl": ".prev-{{ section.id }}"
        }
      }'>
      <div class="swiper-wrapper flex">
        {% for link in mainList limit: 10 %}
          {% if link.url != collection.url %}
            <a href="{{ link.url }}" class="swiper-slide !w-fit mr-2.5 border border-solid border-secondary !text-secondary rounded-3xl inline-block transition-all duration-300 hover:border-primary-opacity-30 hover:bg-primary-opacity-30" title="{{ link.title }}">
              <h2 class="text-sm leading-5 capitalize py-1 px-3 font-normal">{{ link.title }}</h2>
            </a>
          {% endif %}
        {% endfor %}
      </div>
    </swiper-component>
    <div class="hidden lg:flex items-center gap-2">
      <button class="w-[30px] h-[30px] border cursor-pointer disabled:opacity-0.5 disabled:cursor-default border-solid border-secondary hover:border-primary-opacity-30 bg-[#eee] rounded-3xl hidden lg:flex lg:items-center lg:justify-center transition-all duration-300 hover:bg-primary-opacity-30 prev-{{ section.id }}">
        {%- render 'icon-chevron-left', class: 'w-1.5 h-auto' -%}
      </button>
      <button class="w-[30px] h-[30px] border cursor-pointer disabled:opacity-0.5 disabled:cursor-default border-solid border-secondary hover:border-primary-opacity-30 bg-[#eee] rounded-3xl hidden lg:flex lg:items-center lg:justify-center transition-all duration-300 hover:bg-primary-opacity-30 next-{{ section.id }}">
        {%- render 'icon-chevron-right', class: 'w-1.5 h-auto' -%}
      </button>
    </div>
  </div>
{% endif %}

{% schema %}
  {
    "name": "Collection navigation",
    "settings": [
      {
        "type": "link_list",
        "id": "menu",
        "default": "main-menu",
        "label": "Collection navigation"
      }
    ],
    "presets": [
      {
        "name": "Collection navigation"
      }
    ]
  }
  {% endschema %}